<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convertisseur Multi-Base</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .mode-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            box-shadow: 0 6px 20px rgba(245, 87, 108, 0.6);
        }

        .workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .panel h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            transition: all 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .base-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .base-option {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            background: white;
        }

        .base-option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.2);
        }

        .base-option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
        }

        .base-name {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .base-desc {
            font-size: 0.85em;
            opacity: 0.8;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover {
            background: #667eea;
            color: white;
        }

        .history-panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .history-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .history-item:hover {
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transform: translateX(5px);
        }

        .history-info {
            flex: 1;
        }

        .history-text {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .history-base {
            color: #667eea;
            font-size: 0.9em;
        }

        .history-result {
            font-family: 'Courier New', monospace;
            color: #666;
            font-size: 0.85em;
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .history-actions {
            display: flex;
            gap: 10px;
        }

        .icon-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .icon-btn:hover {
            background: #f0f0f0;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            animation: toastIn 0.3s ease;
            z-index: 1000;
        }

        @keyframes toastIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .output-char {
            display: inline-block;
            animation: charAppear 0.3s ease;
        }

        @keyframes charAppear {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .workspace {
                grid-template-columns: 1fr;
            }
            
            .mode-selector {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî¢ Convertisseur Multi-Base</h1>
        <p class="subtitle">Transformez vos textes en diff√©rentes bases num√©riques avec style</p>

        <div class="mode-selector">
            <button class="mode-btn active" data-mode="encode">üìù Encoder le Texte</button>
            <button class="mode-btn" data-mode="decode">üîì D√©coder</button>
        </div>

        <div class="workspace">
            <div class="panel">
                <h2 id="inputTitle">Texte √† convertir</h2>
                <textarea id="inputText" placeholder="Entrez votre texte ici..."></textarea>
                
                <div class="stats">
                    <div class="stat-box">
                        <div class="stat-value" id="charCount">0</div>
                        <div class="stat-label">Caract√®res</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="byteCount">0</div>
                        <div class="stat-label">Octets</div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <h2>S√©lectionnez la base</h2>
                <div class="base-selector">
                    <div class="base-option selected" data-base="binary">
                        <div class="base-name">Binaire</div>
                        <div class="base-desc">Base 2 (0-1)</div>
                    </div>
                    <div class="base-option" data-base="octal">
                        <div class="base-name">Octal</div>
                        <div class="base-desc">Base 8 (0-7)</div>
                    </div>
                    <div class="base-option" data-base="decimal">
                        <div class="base-name">D√©cimal</div>
                        <div class="base-desc">Base 10 (0-9)</div>
                    </div>
                    <div class="base-option" data-base="hex">
                        <div class="base-name">Hexad√©cimal</div>
                        <div class="base-desc">Base 16 (0-F)</div>
                    </div>
                    <div class="base-option" data-base="base64">
                        <div class="base-name">Base64</div>
                        <div class="base-desc">Encodage ASCII</div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="convertBtn">‚ú® Convertir</button>
                    <button class="btn btn-secondary" id="clearBtn">üóëÔ∏è Effacer</button>
                </div>
            </div>
        </div>

        <div class="panel">
            <h2>R√©sultat</h2>
            <textarea id="outputText" placeholder="Le r√©sultat appara√Ætra ici..." readonly></textarea>
            <div class="action-buttons">
                <button class="btn btn-primary" id="copyBtn">üìã Copier</button>
                <button class="btn btn-secondary" id="swapBtn">üîÑ Inverser</button>
            </div>
        </div>

        <div class="history-panel">
            <h2>üìö Historique des conversions</h2>
            <div id="historyContainer"></div>
        </div>

        <div style="text-align: center; margin-top: 30px; padding: 20px; color: #666; font-size: 0.9em;">
            <p style="margin: 5px 0;">‚ú® Con√ßu avec passion par <strong style="color: #667eea;">Corneille Ligan</strong> ‚ú®</p>
            <p style="margin: 5px 0; font-size: 0.85em;">¬© 2025 - Tous droits r√©serv√©s</p>
        </div>
    </div>

    <script>
        let currentMode = 'encode';
        let selectedBase = 'binary';
        let history = [];

        const inputText = document.getElementById('inputText');
        const outputText = document.getElementById('outputText');
        const charCount = document.getElementById('charCount');
        const byteCount = document.getElementById('byteCount');
        const inputTitle = document.getElementById('inputTitle');
        const historyContainer = document.getElementById('historyContainer');

        // Mode selection
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentMode = btn.dataset.mode;
                updateUI();
            });
        });

        // Base selection
        document.querySelectorAll('.base-option').forEach(option => {
            option.addEventListener('click', () => {
                document.querySelectorAll('.base-option').forEach(o => o.classList.remove('selected'));
                option.classList.add('selected');
                selectedBase = option.dataset.base;
            });
        });

        // Update stats
        inputText.addEventListener('input', () => {
            const text = inputText.value;
            charCount.textContent = text.length;
            byteCount.textContent = new Blob([text]).size;
        });

        // Convert button
        document.getElementById('convertBtn').addEventListener('click', convert);

        // Clear button
        document.getElementById('clearBtn').addEventListener('click', () => {
            inputText.value = '';
            outputText.value = '';
            charCount.textContent = '0';
            byteCount.textContent = '0';
        });

        // Copy button
        document.getElementById('copyBtn').addEventListener('click', () => {
            outputText.select();
            document.execCommand('copy');
            showToast('‚úÖ Copi√© dans le presse-papiers !');
        });

        // Swap button
        document.getElementById('swapBtn').addEventListener('click', () => {
            const temp = inputText.value;
            inputText.value = outputText.value;
            outputText.value = temp;
            inputText.dispatchEvent(new Event('input'));
        });

        function updateUI() {
            if (currentMode === 'encode') {
                inputTitle.textContent = 'Texte √† convertir';
                inputText.placeholder = 'Entrez votre texte ici...';
            } else {
                inputTitle.textContent = 'Code √† d√©coder';
                inputText.placeholder = 'Entrez le code encod√© ici...';
            }
        }

        function convert() {
            const input = inputText.value;
            if (!input) {
                showToast('‚ö†Ô∏è Veuillez entrer du texte');
                return;
            }

            let result;
            try {
                if (currentMode === 'encode') {
                    result = encode(input, selectedBase);
                } else {
                    result = decode(input, selectedBase);
                }
                
                animateOutput(result);
                addToHistory(input, result, selectedBase, currentMode);
                showToast('‚ú® Conversion r√©ussie !');
            } catch (error) {
                showToast('‚ùå Erreur de conversion');
                console.error(error);
            }
        }

        function encode(text, base) {
            const encoder = new TextEncoder();
            const bytes = encoder.encode(text);
            
            switch(base) {
                case 'binary':
                    return Array.from(bytes).map(byte => 
                        byte.toString(2).padStart(8, '0')
                    ).join(' ');
                
                case 'octal':
                    return Array.from(bytes).map(byte => 
                        byte.toString(8).padStart(3, '0')
                    ).join(' ');
                
                case 'decimal':
                    return Array.from(bytes).map(byte => 
                        byte.toString(10)
                    ).join(' ');
                
                case 'hex':
                    return Array.from(bytes).map(byte => 
                        byte.toString(16).toUpperCase().padStart(2, '0')
                    ).join(' ');
                
                case 'base64':
                    let binary = '';
                    bytes.forEach(byte => binary += String.fromCharCode(byte));
                    return btoa(binary);
                
                default:
                    return text;
            }
        }

        function decode(encoded, base) {
            try {
                let bytes;
                
                switch(base) {
                    case 'binary':
                        bytes = encoded.split(' ').map(bin => parseInt(bin, 2));
                        break;
                    
                    case 'octal':
                        bytes = encoded.split(' ').map(oct => parseInt(oct, 8));
                        break;
                    
                    case 'decimal':
                        bytes = encoded.split(' ').map(dec => parseInt(dec, 10));
                        break;
                    
                    case 'hex':
                        bytes = encoded.split(' ').map(hex => parseInt(hex, 16));
                        break;
                    
                    case 'base64':
                        const binaryString = atob(encoded);
                        bytes = Array.from(binaryString).map(char => char.charCodeAt(0));
                        break;
                    
                    default:
                        return encoded;
                }
                
                const decoder = new TextDecoder('utf-8');
                return decoder.decode(new Uint8Array(bytes));
                
            } catch (error) {
                throw new Error('Format invalide pour le d√©codage');
            }
        }

        function animateOutput(text) {
            outputText.value = '';
            let i = 0;
            const interval = setInterval(() => {
                if (i < text.length) {
                    outputText.value += text[i];
                    i++;
                } else {
                    clearInterval(interval);
                }
            }, 5);
        }

        function addToHistory(input, output, base, mode) {
            const item = {
                input,
                output,
                base,
                mode,
                timestamp: new Date().toLocaleString()
            };
            
            history.unshift(item);
            if (history.length > 10) history.pop();
            
            renderHistory();
        }

        function renderHistory() {
            historyContainer.innerHTML = history.map((item, index) => `
                <div class="history-item">
                    <div class="history-info">
                        <div class="history-text">${item.input.substring(0, 30)}${item.input.length > 30 ? '...' : ''}</div>
                        <div class="history-base">${item.mode === 'encode' ? '‚Üí' : '‚Üê'} ${getBaseName(item.base)} ‚Ä¢ ${item.timestamp}</div>
                        <div class="history-result">${item.output.substring(0, 50)}${item.output.length > 50 ? '...' : ''}</div>
                    </div>
                    <div class="history-actions">
                        <button class="icon-btn" onclick="restoreFromHistory(${index})" title="Restaurer">‚Ü©Ô∏è</button>
                        <button class="icon-btn" onclick="copyFromHistory(${index})" title="Copier">üìã</button>
                    </div>
                </div>
            `).join('');
        }

        function restoreFromHistory(index) {
            const item = history[index];
            inputText.value = item.input;
            selectedBase = item.base;
            
            document.querySelectorAll('.base-option').forEach(o => o.classList.remove('selected'));
            document.querySelector(`[data-base="${item.base}"]`).classList.add('selected');
            
            inputText.dispatchEvent(new Event('input'));
            showToast('‚úÖ Restaur√© depuis l\'historique');
        }

        function copyFromHistory(index) {
            const item = history[index];
            navigator.clipboard.writeText(item.output);
            showToast('‚úÖ R√©sultat copi√© !');
        }

        function getBaseName(base) {
            const names = {
                binary: 'Binaire',
                octal: 'Octal',
                decimal: 'D√©cimal',
                hex: 'Hexad√©cimal',
                base64: 'Base64'
            };
            return names[base] || base;
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'toastIn 0.3s ease reverse';
                setTimeout(() => toast.remove(), 300);
            }, 2500);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'Enter') {
                convert();
            }
        });
    </script>
</body>
</html>